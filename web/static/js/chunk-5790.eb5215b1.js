(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5790"],{"02Ld":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pad20"},[a("div",[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"用户手机："}},[a("el-input",{model:{value:t.map.mobile,callback:function(e){t.$set(t.map,"mobile","string"==typeof e?e.trim():e)},expression:"map.mobile"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"昵称："}},[a("el-input",{model:{value:t.map.nickname,callback:function(e){t.$set(t.map,"nickname","string"==typeof e?e.trim():e)},expression:"map.nickname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{staticClass:"auto-width",staticStyle:{width:"85px"},attrs:{clearable:"",filterable:"",placeholder:"状态"},model:{value:t.map.statusId,callback:function(e){t.$set(t.map,"statusId",e)},expression:"map.statusId"}},t._l(t.opts.statusIdList,function(t){return a("el-option",{key:t.code,attrs:{label:t.desc,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"注册时间："}},[a("div",[a("datePicker",{ref:"dataRange",attrs:{newVal:t.gmtCreate,type:"daterange"},model:{value:t.gmtCreate,callback:function(e){t.gmtCreate=e},expression:"gmtCreate"}})],1)]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:t.handleCheck}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh"},on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),t._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.ctrl.load,expression:"ctrl.load"}],staticStyle:{width:"100%"},attrs:{size:"medium",data:t.list,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userNo",label:"用户编号"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户手机"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"/user/pc/user/ext/view",expression:"'/user/pc/user/ext/view'"}],attrs:{type:"text"},on:{click:function(a){t.handleView(e.row.id)}}},[t._v(t._s(e.row.mobile))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"用户类型",prop:"userType",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.userType?a("el-tag",{attrs:{type:"success"}},[t._v("用户")]):t._e(),t._v(" "),2===e.row.userType?a("el-tag",{attrs:{type:"brandColor"}},[t._v("讲师")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"昵称"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",prop:"statusId",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-color":"#ff4949","inactive-color":"#13ce66","active-text":"禁用","inactive-text":"正常"},on:{change:function(a){t.handleChangeStatus(e.row.id,e.row.statusId)}},model:{value:e.row.statusId,callback:function(a){t.$set(e.row,"statusId",a)},expression:"scope.row.statusId"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"gmtCreate",label:"注册时间"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("ul",{staticClass:"list-item-actions"},[a("li",[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"/user/pc/user/ext/view",expression:"'/user/pc/user/ext/view'"}],attrs:{type:"success",size:"mini"},on:{click:function(a){t.handleEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"/course/pc/course/user/study/log/list",expression:"'/course/pc/course/user/study/log/list'"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){t.handleStudy(e.row.userNo)}}},[t._v("学习记录")])],1)])]}}])})],1)],1),t._v(" "),a("el-pagination",{staticStyle:{float:"right","margin-top":"20px","margin-bottom":"22px"},attrs:{background:"","page-size":t.page.pageSize,"page-sizes":[20,50,100,200,500,1e3],layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("edit",{attrs:{visible:t.ctrl.dialogVisible,formData:t.formData,title:t.ctrl.dialogTitle},on:{"close-callback":t.closeCallback}}),t._v(" "),a("view-user",{attrs:{visible:t.ctrl.viewVisible,formData:t.formData,title:t.ctrl.dialogTitle},on:{"close-callback":t.closeCallback}})],1)};i._withStripped=!0;var l=a("wk8/"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{width:"45%",title:t.title,visible:t.visible,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户手机："}},[a("el-input",{attrs:{disabled:!0},model:{value:t.formData.mobile,callback:function(e){t.$set(t.formData,"mobile",e)},expression:"formData.mobile"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"昵称："}},[a("el-input",{model:{value:t.formData.nickname,callback:function(e){t.$set(t.formData,"nickname",e)},expression:"formData.nickname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别："}},[a("el-radio-group",{model:{value:t.formData.sex,callback:function(e){t.$set(t.formData,"sex",e)},expression:"formData.sex"}},[a("el-radio",{attrs:{label:1}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("女")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("保密")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"年龄："}},[a("el-input",{model:{value:t.formData.age,callback:function(e){t.$set(t.formData,"age",e)},expression:"formData.age"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"17px"}},[a("el-button",{staticStyle:{float:"right","margin-left":"6px"},attrs:{size:"mini",type:"danger",plain:""},on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.submitForm("formData")}}},[t._v("确定")])],1)],1)};r._withStripped=!0;var s={name:"Edit",data:function(){return{fileList:[]}},props:{formData:{type:Object,default:function(){}},visible:{type:Boolean,default:!1},title:{type:String,default:""}},methods:{handleChange:function(t){console.log(t)},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},success:function(t,e,a){console.log("成功"+a)},handleExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+t.length+" 个文件")},beforeRemove:function(t,e){return this.$confirm("确定移除"+t.name+"？")},handleClose:function(t){this.$emit("close-callback")},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){t?void 0===e.formData.id?e.$message({type:"error",message:"提交失败"}):(e.loading.show(),l.c(e.formData).then(function(t){e.loading.hide(),200===t.code&&t.data>0?(e.tips("操作成功","success"),e.handleClose()):e.$message({type:"error",message:"提交失败"})}).catch(function(){e.loading.hide()})):e.$message({type:"error",message:"提交失败"})})}}},n=a("KHd+"),o=Object(n.a)(s,r,[],!1,null,null,null);o.options.__file="src\\views\\user\\ext\\edit.vue";var c=o.exports,u=a("5Q3H"),d=a("y2Dr"),m={components:{Edit:c,viewUser:u.a,datePicker:d.a},data:function(){return{list:[],map:{},formData:{},gmtCreate:"",userNo:"",ctrl:{load:!1,remoteAuthorLoading:!1,dialogVisible:!1,viewVisible:!1,studyVisible:!1},opts:{statusIdList:[]},page:{beginPageIndex:1,pageCurrent:1,endPageIndex:8,pageSize:20,totalCount:0,totalPage:0}}},watch:{gmtCreate:function(t){null!==this.gmtCreate&&this.gmtCreate.length?(this.map.beginGmtCreate=this.gmtCreate[0],this.map.endGmtCreate=this.gmtCreate[1]):(this.map.beginGmtCreate="",this.map.endGmtCreate="")}},mounted:function(){var t=this;this.$store.dispatch("GetOpts",{enumName:"StatusIdEnum",type:"arr"}).then(function(e){t.opts.statusIdList=e}),this.userExtList(1)},methods:{handleStudy:function(t){this.$router.push({path:"/user/studyLog",query:{userNo:t}})},handleEdit:function(t){this.getExt(t,"edit")},handleView:function(t){this.getExt(t,"view")},closeCallback:function(){this.formData={},this.ctrl.dialogVisible=!1,this.ctrl.viewVisible=!1,this.ctrl.studyVisible=!1,this.reload()},getExt:function(t,e){var a=this;this.ctrl.load=!0,l.d({id:t}).then(function(t){a.formData=t.data,"view"===e?(a.ctrl.dialogTitle="信息查看",a.ctrl.viewVisible=!0):(a.ctrl.dialogTitle="信息修改",a.ctrl.dialogVisible=!0),a.ctrl.load=!1}).catch(function(){a.ctrl.load=!1})},handleChangeStatus:function(t,e){var a=this;this.$confirm("确定要"+{0:"禁用",1:"启用"}[e]+"吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.ctrl.load=!0,a.changeStatus(t,e),a.reload()}).catch(function(){a.reload()})},changeStatus:function(t,e){var a=this;l.c({id:t,statusId:e}).then(function(t){if(a.ctrl.load=!1,200===t.code&&t.data>0){a.$message({type:"success",message:{0:"禁用成功",1:"启用成功"}[e]}),a.reload()}else{a.$message({type:"error",message:{0:"禁用失败",1:"启用失败"}[e]}),a.reload()}}).catch(function(){a.ctrl.load=!1,a.reload()})},handleCheck:function(){this.page.pageCurrent=1,this.userExtList()},handleReset:function(){this.reload()},reload:function(){this.map={},this.gmtCreate="",this.userExtList()},handleSizeChange:function(t){this.page.pageSize=t,this.userExtList()},handleCurrentChange:function(t){this.page.pageCurrent=t,this.userExtList()},userExtList:function(){var t=this;this.ctrl.load=!0,l.b(this.map,this.page.pageCurrent,this.page.pageSize).then(function(e){t.list=e.data.list,t.page.pageCurrent=e.data.pageCurrent,t.page.totalCount=e.data.totalCount,t.page.pageSize=e.data.pageSize,t.ctrl.load=!1}).catch(function(){t.ctrl.load=!1})}}},p=Object(n.a)(m,i,[],!1,null,null,null);p.options.__file="src\\views\\user\\ext\\index.vue";e.default=p.exports},"51ag":function(t,e,a){},"5Q3H":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.visible,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{attrs:{inline:!0}},[a("el-card",[a("el-divider",{staticStyle:{"font-weight":"bold","background-color":"#f4f4f5"}},[t._v("基础信息")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"用户编号:"}},[a("span",[t._v(t._s(t.formData.userNo))])])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"用户类型:"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.textClass(t.formData.userType)},[t._v(t._s(t.textUserType[t.formData.userType]))])]}}])})],1)])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"手机号:"}},[a("span",[t._v(t._s(t.formData.mobile))])])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"昵称:"}},[a("span",[t._v(t._s(t.formData.nickname))])])],1)])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"注册时间:"}},[a("span",[t._v(t._s(t.formData.gmtCreate))])])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"状态:"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.textClass(t.formData.statusId)},[t._v(t._s(t.textStatusId[t.formData.statusId]))])]}}])})],1)])],1)],1),t._v(" "),a("br"),t._v(" "),a("el-card",[a("el-divider",{staticStyle:{"font-weight":"bold","background-color":"#f4f4f5"}},[t._v("基础信息")]),t._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"用户头像:"}},[a("div",{staticClass:"demo-image"},[a("div",{staticClass:"block"},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.formData.headImgUrl}})],1)])])],1)])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"性别:"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.textClass(t.formData.sex)},[t._v(t._s(t.textUex[t.formData.sex]))])]}}])})],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"年龄:"}},[a("span",[t._v(t._s(t.formData.age))])])],1)])],1),t._v(" "),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[t._v(t._s(t.formData.remark))])])],1)],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"17px"}},[a("el-button",{staticStyle:{float:"right","margin-left":"6px"},attrs:{size:"mini",type:"danger",plain:""},on:{click:t.handleClose}},[t._v("取 消")])],1)],1)};i._withStripped=!0;var l={data:function(){return{textStatusId:{1:"正常",0:"禁用"},textUserType:{1:"用户",2:"讲师"},textUex:{1:"男",2:"女",3:"保密"}}},props:{formData:{type:Object,default:function(){}},visible:{type:Boolean,default:!1},title:{type:String,default:""}},methods:{textClass:function(t){return{c_red:0===t,c_blue:2===t}},handleClose:function(t){this.$emit("close-callback")}}},r=a("KHd+"),s=Object(r.a)(l,i,[],!1,null,null,null);s.options.__file="src\\views\\user\\ext\\view.vue";e.a=s.exports},UWpW:function(t,e,a){"use strict";var i=a("51ag");a.n(i).a},"wk8/":function(t,e,a){"use strict";a.d(e,"e",function(){return s}),a.d(e,"b",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"d",function(){return c}),a.d(e,"a",function(){return u});var i=a("QbLZ"),l=a.n(i),r=a("t3Un");function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Object(r.a)({url:"/user/pc/user/list",method:"post",data:l()({pageCurrent:e,pageSize:a},t)})}function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Object(r.a)({url:"/user/pc/user/ext/list",method:"post",data:l()({pageCurrent:e,pageSize:a},t)})}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({url:"/user/pc/user/ext/update",method:"post",data:t})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({url:"/user/pc/user/ext/view",method:"post",data:t})}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Object(r.a)({url:"/course/pc/course/user/study/log/list",method:"post",data:l()({pageCurrent:e,pageSize:a},t)})}},y2Dr:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-date-picker",{attrs:{type:t.type,align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.returnBackFn},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})};i._withStripped=!0;var l={data:function(){var t=this;return{dates:[],value:[],pickerOptions:{shortcuts:[{text:"昨天",onClick:function(e){var a=t.setNow(1,1);e.$emit("pick",a)}},{text:"最近一周",onClick:function(e){var a=t.setNow(7);e.$emit("pick",a)}},{text:"最近一个月",onClick:function(e){var a=t.setNow(30);e.$emit("pick",a)}},{text:"最近三个月",onClick:function(e){var a=t.setNow(90);e.$emit("pick",a)}}]}}},props:{type:{type:String,default:"daterange"},default:{type:Array,default:function(){return[0,0]}},autofill:{type:Boolean,default:!1},newVal:{type:String,default:"daterange"}},model:{prop:"value",event:"returnBack"},watch:{newVal:function(t){this.value=t}},mounted:function(){this.autofill&&this.reset(this.default[0],this.default[1])},methods:{setNow:function(t,e){var a=new Date,i=new Date;if(i.setTime(a.getTime()-864e5*t),e){var l=t+1-e;a.setTime(a.getTime()-864e5*l)}var r=a.getFullYear(),s=a.getMonth(),n=a.getDate();return[i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),r+"-"+(s+1)+"-"+n]},returnBackFn:function(){this.$emit("returnBack",this.value)},clear:function(){this.value=[],this.$emit("returnBack",this.value)},reset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.default[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.default[1];this.value=this.setNow(t,e),this.$emit("returnBack",this.value)}}},r=(a("UWpW"),a("KHd+")),s=Object(r.a)(l,i,[],!1,null,"80cec028",null);s.options.__file="src\\components\\DateRange\\datePicker.vue";e.a=s.exports}}]);